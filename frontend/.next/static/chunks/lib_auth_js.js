"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["lib_auth_js"],{

/***/ "./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getCurrentUser\": function() { return /* binding */ getCurrentUser; },\n/* harmony export */   \"login\": function() { return /* binding */ login; },\n/* harmony export */   \"logout\": function() { return /* binding */ logout; },\n/* harmony export */   \"refreshToken\": function() { return /* binding */ refreshToken; },\n/* harmony export */   \"signup\": function() { return /* binding */ signup; },\n/* harmony export */   \"useAuth\": function() { return /* binding */ useAuth; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swc/helpers/src/_async_to_generator.mjs */ \"./node_modules/@swc/helpers/src/_async_to_generator.mjs\");\n/* harmony import */ var _swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/src/_ts_generator.mjs */ \"./node_modules/@swc/helpers/src/_ts_generator.mjs\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api */ \"./lib/api.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n\n\nvar _s = $RefreshSig$();\n\n\n\n// Core authentication functions\nfunction login(username, password) {\n    return _login.apply(this, arguments);\n}\nfunction _login() {\n    _login = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(function(username, password) {\n        var formData, response, _data, access_token, refresh_token, error, ref, ref1, ref2, errorDetails;\n        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    formData = new URLSearchParams();\n                    formData.append(\"username\", username);\n                    formData.append(\"password\", password);\n                    _state.label = 1;\n                case 1:\n                    _state.trys.push([\n                        1,\n                        3,\n                        ,\n                        4\n                    ]);\n                    return [\n                        4,\n                        _api__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(\"/auth/token\", formData, {\n                            headers: {\n                                \"Content-Type\": \"application/x-www-form-urlencoded\"\n                            }\n                        })\n                    ];\n                case 2:\n                    response = _state.sent();\n                    _data = response.data, access_token = _data.access_token, refresh_token = _data.refresh_token;\n                    localStorage.setItem(\"token\", access_token);\n                    if (refresh_token) localStorage.setItem(\"refresh_token\", refresh_token);\n                    console.log(\"Login successful:\", {\n                        username: username\n                    });\n                    return [\n                        2,\n                        response.data\n                    ];\n                case 3:\n                    error = _state.sent();\n                    errorDetails = {\n                        status: (ref = error.response) === null || ref === void 0 ? void 0 : ref.status,\n                        data: (ref1 = error.response) === null || ref1 === void 0 ? void 0 : ref1.data,\n                        message: error.message\n                    };\n                    console.error(\"Login failed:\", errorDetails);\n                    throw new Error(((ref2 = errorDetails.data) === null || ref2 === void 0 ? void 0 : ref2.detail) || \"Login failed\");\n                case 4:\n                    return [\n                        2\n                    ];\n            }\n        });\n    });\n    return _login.apply(this, arguments);\n}\nfunction signup(username, password) {\n    return _signup.apply(this, arguments);\n}\nfunction _signup() {\n    _signup = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(function(username, password) {\n        var response, _data, access_token, refresh_token, error, ref, ref1, ref2, errorDetails;\n        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    _state.trys.push([\n                        0,\n                        2,\n                        ,\n                        3\n                    ]);\n                    return [\n                        4,\n                        _api__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(\"/auth/signup\", {\n                            username: username,\n                            password: password\n                        })\n                    ];\n                case 1:\n                    response = _state.sent();\n                    _data = response.data, access_token = _data.access_token, refresh_token = _data.refresh_token;\n                    localStorage.setItem(\"token\", access_token);\n                    if (refresh_token) localStorage.setItem(\"refresh_token\", refresh_token);\n                    console.log(\"Signup successful:\", {\n                        username: username\n                    });\n                    return [\n                        2,\n                        response.data\n                    ];\n                case 2:\n                    error = _state.sent();\n                    errorDetails = {\n                        status: (ref = error.response) === null || ref === void 0 ? void 0 : ref.status,\n                        data: (ref1 = error.response) === null || ref1 === void 0 ? void 0 : ref1.data,\n                        message: error.message\n                    };\n                    console.error(\"Signup failed:\", errorDetails);\n                    throw new Error(((ref2 = errorDetails.data) === null || ref2 === void 0 ? void 0 : ref2.detail) || \"Signup failed\");\n                case 3:\n                    return [\n                        2\n                    ];\n            }\n        });\n    });\n    return _signup.apply(this, arguments);\n}\nfunction logout() {\n    return _logout.apply(this, arguments);\n}\nfunction _logout() {\n    _logout = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(function() {\n        var navigate;\n        var _arguments = arguments;\n        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, function(_state) {\n            navigate = _arguments.length > 0 && _arguments[0] !== void 0 ? _arguments[0] : null;\n            try {\n                localStorage.removeItem(\"token\");\n                localStorage.removeItem(\"refresh_token\");\n                console.log(\"Logout successful\");\n                if (navigate) {\n                    navigate(\"/login\");\n                } else {\n                    window.location.href = \"/login\";\n                }\n            } catch (error) {\n                console.error(\"Logout failed:\", error);\n            }\n            return [\n                2\n            ];\n        });\n    });\n    return _logout.apply(this, arguments);\n}\nfunction getCurrentUser() {\n    return _getCurrentUser.apply(this, arguments);\n}\nfunction _getCurrentUser() {\n    _getCurrentUser = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(function() {\n        var response, error;\n        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    _state.trys.push([\n                        0,\n                        2,\n                        ,\n                        3\n                    ]);\n                    return [\n                        4,\n                        _api__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(\"/auth/me\")\n                    ];\n                case 1:\n                    response = _state.sent();\n                    console.log(\"Fetched current user:\", response.data);\n                    return [\n                        2,\n                        response.data\n                    ];\n                case 2:\n                    error = _state.sent();\n                    console.error(\"Failed to fetch current user:\", error);\n                    throw new Error(\"Unable to fetch user information\");\n                case 3:\n                    return [\n                        2\n                    ];\n            }\n        });\n    });\n    return _getCurrentUser.apply(this, arguments);\n}\nfunction refreshToken() {\n    return _refreshToken.apply(this, arguments);\n}\nfunction _refreshToken() {\n    _refreshToken = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(function() {\n        var refreshToken, response, access_token, error;\n        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    refreshToken = localStorage.getItem(\"refresh_token\");\n                    if (!refreshToken) {\n                        throw new Error(\"No refresh token available\");\n                    }\n                    _state.label = 1;\n                case 1:\n                    _state.trys.push([\n                        1,\n                        3,\n                        ,\n                        4\n                    ]);\n                    return [\n                        4,\n                        _api__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(\"/auth/refresh\", {\n                            refresh_token: refreshToken\n                        })\n                    ];\n                case 2:\n                    response = _state.sent();\n                    access_token = response.data.access_token;\n                    localStorage.setItem(\"token\", access_token);\n                    console.log(\"Token refreshed successfully\");\n                    return [\n                        2,\n                        access_token\n                    ];\n                case 3:\n                    error = _state.sent();\n                    console.error(\"Token refresh failed:\", error);\n                    throw new Error(\"Failed to refresh token\");\n                case 4:\n                    return [\n                        2\n                    ];\n            }\n        });\n    });\n    return _refreshToken.apply(this, arguments);\n}\n// React Hook for authentication state management\nfunction useAuth() {\n    _s();\n    var ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), user = ref[0], setUser = ref[1];\n    var ref1 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true), loading = ref1[0], setLoading = ref1[1];\n    var router = (0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)();\n    var fetchUser = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(/*#__PURE__*/ (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(function() {\n        var userData, error;\n        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    _state.trys.push([\n                        0,\n                        2,\n                        3,\n                        4\n                    ]);\n                    setLoading(true);\n                    return [\n                        4,\n                        getCurrentUser()\n                    ];\n                case 1:\n                    userData = _state.sent();\n                    setUser(userData);\n                    return [\n                        3,\n                        4\n                    ];\n                case 2:\n                    error = _state.sent();\n                    setUser(null);\n                    localStorage.removeItem(\"token\");\n                    localStorage.removeItem(\"refresh_token\");\n                    router.push(\"/login\");\n                    return [\n                        3,\n                        4\n                    ];\n                case 3:\n                    setLoading(false);\n                    return [\n                        7\n                    ];\n                case 4:\n                    return [\n                        2\n                    ];\n            }\n        });\n    }), [\n        router\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function() {\n        fetchUser();\n    }, [\n        fetchUser\n    ]);\n    var handleLogin = function() {\n        var _ref = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(function(username, password) {\n            var error;\n            return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            4,\n                            5\n                        ]);\n                        setLoading(true);\n                        return [\n                            4,\n                            login(username, password)\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            4,\n                            fetchUser()\n                        ];\n                    case 2:\n                        _state.sent();\n                        router.push(\"/\");\n                        return [\n                            3,\n                            5\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        throw error;\n                    case 4:\n                        setLoading(false);\n                        return [\n                            7\n                        ];\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        });\n        return function handleLogin(username, password) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n    var handleSignup = function() {\n        var _ref = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(function(username, password) {\n            var error;\n            return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            4,\n                            5\n                        ]);\n                        setLoading(true);\n                        return [\n                            4,\n                            signup(username, password)\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            4,\n                            fetchUser()\n                        ];\n                    case 2:\n                        _state.sent();\n                        router.push(\"/\");\n                        return [\n                            3,\n                            5\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        throw error;\n                    case 4:\n                        setLoading(false);\n                        return [\n                            7\n                        ];\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        });\n        return function handleSignup(username, password) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n    var handleLogout = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(/*#__PURE__*/ (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(function() {\n        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    _state.trys.push([\n                        0,\n                        ,\n                        2,\n                        3\n                    ]);\n                    setLoading(true);\n                    return [\n                        4,\n                        logout(function() {\n                            return router.push(\"/login\");\n                        })\n                    ];\n                case 1:\n                    _state.sent();\n                    setUser(null);\n                    return [\n                        3,\n                        3\n                    ];\n                case 2:\n                    setLoading(false);\n                    return [\n                        7\n                    ];\n                case 3:\n                    return [\n                        2\n                    ];\n            }\n        });\n    }), [\n        router\n    ]);\n    return {\n        user: user,\n        loading: loading,\n        login: handleLogin,\n        signup: handleSignup,\n        logout: handleLogout,\n        refreshToken: refreshToken\n    };\n}\n_s(useAuth, \"j0gBzgkiIRAzYmKiKlIAQsI8hrQ=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter\n    ];\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (_api__WEBPACK_IMPORTED_MODULE_0__[\"default\"]); // Export api for consistency\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsS0FBSyxDQUFDLENBQUM7Ozs7Ozs7Ozs7SUFFdEIsQ0FBQyxHQUFFO1FBQUNDLE1BQU07S0FBQyxDQUFDO0lBRVosT0FBTztRQUNMSixJQUFJLEVBQUpBLElBQUk7UUFDSkUsT0FBTyxFQUFQQSxPQUFPO1FBQ1BwQyxLQUFLLEVBQUUwQyxXQUFXO1FBQ2xCcEIsTUFBTSxFQUFFcUIsWUFBWTtRQUNwQnBCLE1BQU0sRUFBRXFCLFlBQVk7UUFDcEJiLFlBQVksRUFBWkEsWUFBWTtLQUNiLENBQUM7QUFDSixDQUFDO0dBcEVlRSxPQUFPOztRQUdOckMsa0RBQVM7OztBQW1FMUIsK0RBQWVELDRDQUFHLEVBQUMsQ0FBQyw2QkFBNkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbGliL2F1dGguanM/Mjg3YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXBpIGZyb20gJy4vYXBpJztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG4vLyBDb3JlIGF1dGhlbnRpY2F0aW9uIGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICBjb25zdCBmb3JtRGF0YSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgZm9ybURhdGEuYXBwZW5kKCd1c2VybmFtZScsIHVzZXJuYW1lKTtcbiAgZm9ybURhdGEuYXBwZW5kKCdwYXNzd29yZCcsIHBhc3N3b3JkKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnBvc3QoJy9hdXRoL3Rva2VuJywgZm9ybURhdGEsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCB7IGFjY2Vzc190b2tlbiwgcmVmcmVzaF90b2tlbiB9ID0gcmVzcG9uc2UuZGF0YTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBhY2Nlc3NfdG9rZW4pO1xuICAgIGlmIChyZWZyZXNoX3Rva2VuKSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncmVmcmVzaF90b2tlbicsIHJlZnJlc2hfdG9rZW4pO1xuICAgIGNvbnNvbGUubG9nKCdMb2dpbiBzdWNjZXNzZnVsOicsIHsgdXNlcm5hbWUgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgZXJyb3JEZXRhaWxzID0ge1xuICAgICAgc3RhdHVzOiBlcnJvci5yZXNwb25zZT8uc3RhdHVzLFxuICAgICAgZGF0YTogZXJyb3IucmVzcG9uc2U/LmRhdGEsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgIH07XG4gICAgY29uc29sZS5lcnJvcignTG9naW4gZmFpbGVkOicsIGVycm9yRGV0YWlscyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGV0YWlscy5kYXRhPy5kZXRhaWwgfHwgJ0xvZ2luIGZhaWxlZCcpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWdudXAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucG9zdCgnL2F1dGgvc2lnbnVwJywgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSk7XG4gICAgY29uc3QgeyBhY2Nlc3NfdG9rZW4sIHJlZnJlc2hfdG9rZW4gfSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgYWNjZXNzX3Rva2VuKTtcbiAgICBpZiAocmVmcmVzaF90b2tlbikgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JlZnJlc2hfdG9rZW4nLCByZWZyZXNoX3Rva2VuKTtcbiAgICBjb25zb2xlLmxvZygnU2lnbnVwIHN1Y2Nlc3NmdWw6JywgeyB1c2VybmFtZSB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBlcnJvckRldGFpbHMgPSB7XG4gICAgICBzdGF0dXM6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXMsXG4gICAgICBkYXRhOiBlcnJvci5yZXNwb25zZT8uZGF0YSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgfTtcbiAgICBjb25zb2xlLmVycm9yKCdTaWdudXAgZmFpbGVkOicsIGVycm9yRGV0YWlscyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGV0YWlscy5kYXRhPy5kZXRhaWwgfHwgJ1NpZ251cCBmYWlsZWQnKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0KG5hdmlnYXRlID0gbnVsbCkge1xuICB0cnkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdyZWZyZXNoX3Rva2VuJyk7XG4gICAgY29uc29sZS5sb2coJ0xvZ291dCBzdWNjZXNzZnVsJyk7XG4gICAgaWYgKG5hdmlnYXRlKSB7XG4gICAgICBuYXZpZ2F0ZSgnL2xvZ2luJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9sb2dpbic7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0xvZ291dCBmYWlsZWQ6JywgZXJyb3IpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcigpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZXQoJy9hdXRoL21lJyk7XG4gICAgY29uc29sZS5sb2coJ0ZldGNoZWQgY3VycmVudCB1c2VyOicsIHJlc3BvbnNlLmRhdGEpO1xuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBjdXJyZW50IHVzZXI6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZldGNoIHVzZXIgaW5mb3JtYXRpb24nKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaFRva2VuKCkge1xuICBjb25zdCByZWZyZXNoVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVmcmVzaF90b2tlbicpO1xuICBpZiAoIXJlZnJlc2hUb2tlbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVmcmVzaCB0b2tlbiBhdmFpbGFibGUnKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucG9zdCgnL2F1dGgvcmVmcmVzaCcsIHsgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuIH0pO1xuICAgIGNvbnN0IHsgYWNjZXNzX3Rva2VuIH0gPSByZXNwb25zZS5kYXRhO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIGFjY2Vzc190b2tlbik7XG4gICAgY29uc29sZS5sb2coJ1Rva2VuIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHknKTtcbiAgICByZXR1cm4gYWNjZXNzX3Rva2VuO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHJlZnJlc2ggZmFpbGVkOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byByZWZyZXNoIHRva2VuJyk7XG4gIH1cbn1cblxuLy8gUmVhY3QgSG9vayBmb3IgYXV0aGVudGljYXRpb24gc3RhdGUgbWFuYWdlbWVudFxuZXhwb3J0IGZ1bmN0aW9uIHVzZUF1dGgoKSB7XG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG5cbiAgY29uc3QgZmV0Y2hVc2VyID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xuICAgICAgc2V0VXNlcih1c2VyRGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHNldFVzZXIobnVsbCk7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdyZWZyZXNoX3Rva2VuJyk7XG4gICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3JvdXRlcl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2hVc2VyKCk7XG4gIH0sIFtmZXRjaFVzZXJdKTtcblxuICBjb25zdCBoYW5kbGVMb2dpbiA9IGFzeW5jICh1c2VybmFtZSwgcGFzc3dvcmQpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgIGF3YWl0IGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7XG4gICAgICBhd2FpdCBmZXRjaFVzZXIoKTtcbiAgICAgIHJvdXRlci5wdXNoKCcvJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2lnbnVwID0gYXN5bmMgKHVzZXJuYW1lLCBwYXNzd29yZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgYXdhaXQgc2lnbnVwKHVzZXJuYW1lLCBwYXNzd29yZCk7XG4gICAgICBhd2FpdCBmZXRjaFVzZXIoKTtcbiAgICAgIHJvdXRlci5wdXNoKCcvJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTG9nb3V0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgYXdhaXQgbG9nb3V0KCgpID0+IHJvdXRlci5wdXNoKCcvbG9naW4nKSk7XG4gICAgICBzZXRVc2VyKG51bGwpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtyb3V0ZXJdKTtcblxuICByZXR1cm4ge1xuICAgIHVzZXIsXG4gICAgbG9hZGluZyxcbiAgICBsb2dpbjogaGFuZGxlTG9naW4sXG4gICAgc2lnbnVwOiBoYW5kbGVTaWdudXAsXG4gICAgbG9nb3V0OiBoYW5kbGVMb2dvdXQsXG4gICAgcmVmcmVzaFRva2VuLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBhcGk7IC8vIEV4cG9ydCBhcGkgZm9yIGNvbnNpc3RlbmN5XG4iXSwibmFtZXMiOlsiYXBpIiwidXNlUm91dGVyIiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImZvcm1EYXRhIiwicmVzcG9uc2UiLCJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoX3Rva2VuIiwiZXJyb3IiLCJlcnJvckRldGFpbHMiLCJVUkxTZWFyY2hQYXJhbXMiLCJhcHBlbmQiLCJwb3N0IiwiaGVhZGVycyIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsIm1lc3NhZ2UiLCJFcnJvciIsImRldGFpbCIsInNpZ251cCIsImxvZ291dCIsIm5hdmlnYXRlIiwicmVtb3ZlSXRlbSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImdldEN1cnJlbnRVc2VyIiwiZ2V0IiwicmVmcmVzaFRva2VuIiwiZ2V0SXRlbSIsInVzZUF1dGgiLCJ1c2VyIiwic2V0VXNlciIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwicm91dGVyIiwiZmV0Y2hVc2VyIiwidXNlckRhdGEiLCJwdXNoIiwiaGFuZGxlTG9naW4iLCJoYW5kbGVTaWdudXAiLCJoYW5kbGVMb2dvdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/auth.js\n"));

/***/ })

}]);